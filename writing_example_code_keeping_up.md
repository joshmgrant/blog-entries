In this last installment of my series on [writing example code](), I'll cover one of the most commonly overlooked but most critical aspects of example code. Mainly, I'll look at why keeping example code up to date is important and some approaches for how to keep code up to date. 

Let's start from a good place. You've written some example code, and did a first pass to make sure it works. Then you [think about your audience](https://simplythetest.tumblr.com/post/612751899042742272/writing-example-code-knowing-your-audience-or) and make some edits. You carefully decide how you will handle [copy/pasting your code](https://simplythetest.tumblr.com/post/613040287641681920/writing-example-code-the-copypaste-conundrum) and the problems that may introduce. After this you review your code from the perspective of [(not) applying YAGNI](https://simplythetest.tumblr.com/post/615769806536327168/writing-example-code-you-aint-gonna-need-yagni) and make sure code snippets are available for all readers that may need them. Lastly, you repeat necessary code snippets for clarity since [DRY isn't so great](https://simplythetest.tumblr.com/post/620112393432907776/writing-example-code-dry-isnt-so-spry) for example code. After all of this hard work, you click a button and your example code is now available for everyone who needs it. Pat yourself on the back!

Now consider that time has passed. Maybe a month, maybe a few days, maybe years. How does your example code stand up to the test of time?

On the one hand, no developer works on a project forever so it stands to reason that eventually code will become outdated. On the other hand, there is nothing as frustrating as reading example code that is painfully out of date. In my experience, I've even found example code that falls over hard on the first execution with no changes by me. It is not fun. I realize that software can change, whether quickly in smallish increments or slowly in more dramatic shifts. But I also need to get my stuff working.

This frustration is the main reason example code should be written with future-proofing in mind. Taking steps to avoid example code either falling over hard when executed or simply being badly out of date provides a lot of value to developers and others who may read that code in the future. Future-proofing may even earn some respect to the original author if the code is not only helpful but also relevant long after it was initially written.

How can example code be designed well to age well? Here's a few ideas:

**Internal vs External Dependencies**: Dependency management is a whole topic in itself for software development, but it also applies to sample code as well. In the case of example code, consider _internal_ dependencies - those you may control - and external dependencies - those outside of your control. For example, if a piece of code is written for a specific version of a specific programming language, that would be internal. Documentation in the code, in comments or otherwise, can specify which language version your code applies to. An external dependency may be a third-party library the sample code uses, which could change on a dime.

For external dependencies, it's worth considering if they need to be present at all. Can the example code function without the extra libraries? If not, why not? Can internal dependencies be documented? Also note if there are tool or language specific conventions that may help avoid relying on dependencies in example code. And try your best not to depend on [magic numbers](https://en.wikipedia.org/wiki/Magic_number_(programming)#Unnamed_numerical_constants) or hard-coded values that may change in the future.

**Treat Example Code like Production Code**: Just because example code is meant to be read or referenced doesn't mean it shouldn't work. Code can be exercised regardless of what it is for. Putting together code examples that are exercised regularly with some indication of new errors or issues can be helpful. And since we are living in future, there are wonderful tools that can perform exactly this task. One is [doctest](https://docs.python.org/3/library/doctest.html) in Python, which searches docstrings in Python code and tries to execute them. Running such documentation "tests" slides nicely into now ubiquitous [continuous](https://circleci.com/) [integration](https://github.com/features/actions) processes and pipelines. Even a quick and dirty script might do the trick here. 

The prolific Donald Knuth once famously said of code examples he wrote to "Beware of bugs in the above code; I have only proved it correct, not tried it". In this one case, don't be like Donald Knuth. Example code should be tried out at least once in a while to make sure it still does what it says it does.

Thank you for following my series on example code!